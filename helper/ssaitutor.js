async function get_image(t){let e=t,n=!0;for(i=0;i<=6;i++)e[i]||(n=!1);if(n){let t=e[6],n=new Image;n.src=t,n.onload=function(){let t=document.createElement("canvas"),n=e[4],o=e[5];t.width=n,t.height=o,t.style.width=n,t.style.height=o,t.getContext("2d").drawImage(this,0,0,this.width,this.height,0,0,n,o);let s=new Image;s.src=t.toDataURL(),s.onload=function(){let t=document.createElement("canvas");t.setAttribute("id","visible_screen"),t.height=e[3],t.width=e[2],t.style.height=e[3],t.style.width=e[2],t.getContext("2d").drawImage(this,e[0],e[1],e[2],e[3],0,0,e[2],e[3]),chrome.runtime.sendMessage({message:"ss_dataUrl_sent",payload:t.toDataURL(),type:"open"})}}}else alert("Select a valid region to perform text extraction.")}async function get_coords(){var t,e;t=window.scrollX,e=window.scrollY,window.onscroll=function(){window.scrollTo(t,e)},chrome.runtime.sendMessage({message:"capture_ss"},(t=>{if("captured_successfully"===t.message){let i=document.createElement("canvas");i.id="canvas_background",i.style.width=window.innerWidth,i.style.height=window.innerHeight,i.width=window.innerWidth,i.height=window.innerHeight,i.style.position="fixed",i.style.left=0,i.style.top=0,i.style.zIndex="9999999999",i.style.cursor="crosshair",document.body.appendChild(i),i=document.getElementById("canvas_background");let a={},r=i.getContext("2d");function e(t){a.startX=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft-i.offsetLeft,a.startY=t.pageY-document.body.scrollTop-document.documentElement.scrollTop-i.offsetTop,drag=!0}function n(){drag=!1}function o(t){drag&&(a.w=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft-i.offsetLeft-a.startX,a.h=t.pageY-document.body.scrollTop-document.documentElement.scrollTop-i.offsetTop-a.startY,a.startX<a.startX+a.w&a.startY<a.startY+a.h&&(r.clearRect(0,0,window.innerWidth,window.innerHeight),r.fillRect(0,0,window.innerWidth,a.startY),r.fillRect(0,a.startY,a.startX,window.innerHeight-a.startY),r.fillRect(a.startX,a.startY+a.h,window.innerWidth-a.startX,window.innerHeight-a.startY-a.h),r.fillRect(a.startX+a.w,a.startY,window.innerWidth-a.startX-a.w,a.h)))}async function s(){r.clearRect(0,0,i.width,i.height),document.body.removeChild(i),window.onscroll=function(){}}r.fillStyle="rgba(0, 0, 0, .7)",r.fillRect(0,0,window.innerWidth,window.innerHeight),drag=!1,i.addEventListener("mousedown",e,!1),i.addEventListener("mouseup",n,!1),i.addEventListener("mousemove",o,!1),a.startX=parseFloat(a.startX),a.startY=parseFloat(a.startY),a.w=parseFloat(a.w),a.h=parseFloat(a.h),document.getElementById("canvas_background").addEventListener("click",(()=>{s().then((()=>{get_image([a.startX,a.startY,a.w,a.h,window.innerWidth,window.innerHeight,t.payload]).then((()=>{}))}))}))}}))}async function processManualText(t){chrome.runtime.sendMessage({message:"process_manual_text",payload:t},(t=>{t.message}))}get_coords();